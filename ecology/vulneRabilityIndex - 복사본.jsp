<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<link rel="stylesheet" type="text/css" href="semantic/semantic.min.css">
<script src="https://code.jquery.com/jquery-3.1.1.min.js"
integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
<script src="semantic/semantic.min.js"></script> 
<link rel="stylesheet" href="resources/css/style.css" type="text/css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:300,400,500,700&amp;subset=korean">
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

</head>

<style>
	.ul1_menu1{
		/* padding:10px; */
		font-size: 18px;
	}
	.ul1_menu1 .on{
		background-color: #87827d;
		color:white;
	}
	.ul1_menu1 .on .ul1_menu2{
		font-size: 15px;
	}
	.ul1_menu1 .on .ul1_menu2 .on{
		color:#229AF6;
	}
	.delete.icon {
	cursor:pointer;margin-right:0;margin-left:.5em;font-size:.92857143em;opacity:.5;-webkit-transition:background .1s ease;transition:background .1s ease
	}
	
	.btn-primary {
	  margin-right : 10px;  
	  width: 80px; 
	  height: 35px;
	  border: none;
	  background: #17366e; 
	  color:#fff; 
	  border-radius: 3px; 
	  font-size: 14px;
	  cursor : pointer;
	}
	
	.vulneRability {
		width: 18%; 
		height: 40px; 
		border:1px solid black; 
		float:left; 
		text-align: center; 
		line-height: 40px; 
		font-size: 17px;
	} 
	
	.vulneRabilityOn {
		font-weight: bold; 
		background-color: #17366E; 
		color:#ABC927;
	}
	
	
	#pattern {
		display : none;
	}
	
	#speicesIndexDiv {
		display : none;
	}
	
	.chart {
		
	}
	
	.selectBox {
		width : 105px;
		margin-top : 5px;
	}
	
	
</style>
<script type="text/javascript">
	function loginPop(){
		var url = 'loginPop.do';
		var name = 'loginPopup';
		var option = 'width = 500, height = 350';
		
		window.open(url,name,option);
		
	}
	
	function logOut() {
		window.location.href = "logOut.do";
	}
	
	$(document).ready(function(){
		
		$('#menu2 li').click(function(){
			var li_index = $('#menu2 li').index(this);
			
			if(li_index == 0 ){
				window.location.href = "speciesdata.sp";	
			} else if(li_index == 1) {
				window.location.href = "linkedmaterial.sp";
			} else if(li_index == 2) {
				window.location.href = "climatematerial.sp";
			}
			
		});
		
		/* $('#menu4 li').click(function(){
			var li_index = $('#menu4 li').index(this);
			
			if(li_index == 0) {
				if('${sessionScope.auth}' == 'A' || '${sessionScope.auth}' == 'S') { 
					window.location.href = "noticeManagement.ad";	
				} else {
										
				}
			}else if(li_index == 1){
				if('${sessionScope.auth}' == 'A') {
					window.location.href = "user_management.ad";
				} else {
					window.location.href = "admin_management.ad";	
				}
			} else if(li_index == 2) {
				if('${sessionScope.auth}' == 'S') {
					window.location.href = "user_management.ad";
				} else {
					
				}
			}else if(li_index == 3) {
				if('${sessionScope.auth}' == 'A') {
					window.location.href = "project_management.ad";
				} else {
					window.location.href = "group_management.ad";	
				}
			} else if(li_index == 4) {
				window.location.href = "project_management.ad";
			}
		
		}); */
		
		
		/* $('#menu3 li').click(function(){
			var li_index = $('#menu3 li').index(this);
			
			if(li_index == 0){
				if('${sessionScope.auth}' == '') {
					window.location.href = "distribution.eco";	
				} else {
					window.location.href= "projectLookUp.eco";					
				}
			}	else if(li_index == 1) {
				if('${sessionScope.auth}' == '') {
					window.location.href = "";	
				} else {
					window.location.href= "distribution.eco";					
				}
			}	
		
		}); */
		
		$("#menu1 li").click(function() {
			var li_index = $("#menu1 li").index(this);
			
			if(li_index == 0) {
				window.location.href = "business.do";
			} else if(li_index == 1) {
				window.location.href = "material.do";
			} else if(li_index == 2) {
				window.location.href = "modelResult.do";
			} else if(li_index == 3) {
				window.location.href = "notice.do"
			}
			
		});
	});
	
</script>
<body style = "background-color : white;">

	<div class="header">
	  <div class="wrap">
		<div class="hd_top">
			<ul class="ul_rt">
				<li>사용자 메뉴얼</li>
				<li>
					<c:if test = "${not empty sessionScope.id}">
						<a onclick="logOut();">LOGOUT </a>
					</c:if> 
					
					<c:if test = "${empty sessionScope.id}">
						<a onclick="loginPop();">LOGIN </a>
					</c:if>
				</li>
			</ul>
		</div>
		<div class="hd_bt">
		<!-- <div style="width: 150px; height: 150px; border:1px solid black;">
			
		</div> -->
		<img style="position:absolute; margin-left: 200px; margin-top: 25px;" src="resources/img/Ecosystem.png">
			<p>
				<a href = "main2.do"><img src="resources/img/logo3.png"><img src="resources/img/logo3_.png" class="t2"></a>
			</p> 
			<ul>
				
				<li>
					<a href="#">소　개</a>
					<ul class = "sub2" id = "menu1">
						<li>사업설명</li>
						<li>입력 자료란</li>
						<li>모형 결과 분석</li>
						<li>공지사항</li>
					</ul>
				</li>
				<li>
					<a href="#">입력자료 조회</a>
					<ul class="sub2" id = "menu2">
						<li>생물종자료</li>
						<li>연계자료</li>
						<li>기후자료</li>
					</ul>
				</li>
				<li>
					<a href="#">생태영향 및 취약성평가</a>
					<ul class="sub3" id="menu3">
						<c:if test = "${sessionScope.auth != 'U' && not empty sessionScope.id}">
							<li><a href="projectLookUp.eco">프로젝트 조회</a></li>
						</c:if>
						<li><a href="distribution.eco">종분포모형</a></li>
						<li><a href="diffusion.eco">종확산모형</a></li>
						<li><a href="distriButionResult.eco">기후변화민감종</a></li>
						<li><a href="exoticSpecies.etsp">외래종</a></li>
						<li><a href="habitat.hb">취약서식지</a></li>
					</ul>
				</li>
				<c:if test = "${sessionScope.auth != 'U'  && sessionScope.auth != 'R' && not empty sessionScope.id}">
					<li>
						<a href="#">시스템 관리</a>
						<ul class="sub4" id="menu4">
							<li><a href="noticeManagement.ad">공지사항 관리</a></li>
							<c:if test = "${sessionScope.auth == 'S'}">
								<li><a href="admin_management.ad">관리자 계정관리</a></li>
							</c:if>
							<li><a href="user_management.ad">사용자 관리</a></li>
							<li><a href="group_management.ad">그룹관리</a></li>
							<li><a href="project_management.ad">프로젝트 관리</a></li>
						</ul>
					</li>
				</c:if>
				
				<c:if test = "${sessionScope.auth == 'U' || sessionScope.auth == 'R'}">
					<li>
						<a href = "#">나의 검색 내역</a>
						<ul class = "sub4" id = "menu5">
							<li><a href="lookupList.do">조회 이력</a></li>
						</ul>
					</li>
				</c:if>
				
			</ul>
		</div>
	  </div>
	</div>

	<div style="display:flex;">
		
		<div class="sideMenu" style="width: 11%; height: 600px;">
			<div style="width: 100%; height: 20%; background-color: #17366E; font-weight: bold; text-align: center; line-height: 50px;">
				<p style="font-size:30px; color: #ABC927;">생태영향 및<br> 취약성 평가</p>
			</div>
			
			<div style="width: 100%; height: 100%;">
				<ul class="ul1_menu1">
					<c:if test = "${sessionScope.auth != 'U' && not empty sessionScope.id}">
						<li><a href = "projectLookUp.eco">프로젝트 조회</a></li>
					</c:if>
					<li><a href="distribution.eco">종분포모형</a></li>
					<li><a href="diffusion.eco">종확산모형</a></li>
					<li class="on">
						<a href="distriButionResult.eco">> 기후변화 민감종</a>
						<ul class="ul1_menu2">
							<li><a href="distriButionResult.eco">&nbsp;&nbsp;&nbsp;&nbsp;분포변화 결과</a></li>
							<li class="on"><a href="vulneRabilityIndex.eco">→취약성 지수 결과</a></li>
						</ul>
					</li>
					<li><a href="exoticSpecies.etsp">외래종</a></li>
					<li><a href="habitat.hb">취약서식지</a></li>
				</ul>
			</div>
		</div>
		
		<div class="content"  style="width: 89%; height: 792.7px; background-color : white;">
			<c:if test="${sessionScope.auth != 'U' && sessionScope.auth != 'null'}">
				<div style="width : 99.9%; height:5%; border : 1px solid black; display : flex;">
					<!-- <p style="text-align : left; line-height : 40px; padding-left : 1%; font-weight:bold; font-size : 20px;"></p>
					 -->
					<label  style="text-align : left; line-height : 40px; padding-left : 1%; padding-right : 11%; font-weight:bold; font-size : 20px;" for="project_choice">프로젝트 선택</label>
					<select style="width : 80%; height : 80%; margin : 0 auto; margin-top : 4px;" id="project_choice">
						<option>프로젝트 선택 및 검색창</option>
						<option>Middle_test</option>
					</select>
				</div>
			</c:if>
			
			<div style = "display:flex; height:100%;">
			
				<div style="width: 12%; height: 99.9%; border:1px solid black;">
					<div style = "margin-left : 10px;">
						<a style="float:left; font-size: 20px; font-weight: bold;">취약성 지수 결과</a>
						<br><br>
						
						<input type = "hidden" id = "pageIndex" value = "0"/>
							
						<label style = "display : block; font-size : 18px; font-weight : bold;" for = "project">프로젝트</label>
						<select id = "project" class = "selectBox">
							<option>민감종_001</option>
						</select>
						
						<label style = "display : block; font-size : 18px; font-weight : bold; margin-top : 20px;" for = "analysis">분석 항목</label>
						<select name = "analysis" id = "analysis" class = "selectBox">
							<option value = "speices">생물종별</option>
							<option value = 'analysisYear'>예측년도</option>
						</select>
						
						<label style = "display : block; font-size : 18px; font-weight : bold; margin-top : 20px;" for = "climateModel">기후모델</label>
						<select id = "climateModel" name = "climateModel" class = "selectBox">
							<c:forEach var  = "model" items = "${climateModel}">
								<option value = "${model.value}">${model.value}</option>
							</c:forEach>
						</select>
					</div>
					<label style = "display : block; font-size : 18px; font-weight : bold; margin-top : 20px; margin-bottom : 10px;" for = "climateScenario">기후시나리오</label>
					<select id = "climateScenario" class = "ui fluid search dropdown" name = "climateScenario">
						<c:forEach var  = "scenario" items = "${climateSce}">
							<option value = "${scenario.value}">${scenario.value}</option>
						</c:forEach>
					</select>
				
				
					<label style = "display : block; font-size : 18px; font-weight : bold; margin-top : 20px; margin-bottom : 10px;" for = "speices">생물종</label>
					<select class = "ui fluid search dropdown" id = "speices" name = "speices" multiple="">
						<c:forEach var = "sp" items = "${speices}">
							<option value = "${sp.value}">${sp.value}</option>
						</c:forEach>
					</select>
				</div>
				
				<div style="width : 88%;">
				
					<div style="width: 100%; height: 40px;  display : flex;">
						<div style="width : 33.3%" class = "vulneRability">
							<a href="#">취약성 면적변화비</a>
						</div>
							
						<div style="width : 33.3%" class = "vulneRability">
							<a href="#">취약성 패턴</a>
						</div>
						
						<div style="width : 33.3%" class = "vulneRability">
							<a href="#">취약성 순위</a>
						</div>
					</div>
					
				
				    <div class = "chart" id = "areaChange" style = "display : block; width : 50%; height : 80%;">
				    	<div style="height : 50%; padding : 4%;">
							<div style="display:flex;">
								<p style = "color : rgb(171 , 201 , 39); margin-left : 10px; margin-top : 4px;  font-size : 15px;">◆ </p>
								&nbsp;&nbsp;
						  		<p style = "font-size : 19px; color : #DBDBDB;">Area_Gain_Ratio_Reverse</p>
							</div>
						
						  
						  <div id = "areaChangeLeftChart" class="myChartDiv"></div>
						</div>
					    
					    <div style="height : 50%; padding : 4%; margin-top : 3%;">
					    	<div style="display:flex;">
					    		<p style = "color : rgb(171 , 201 , 39); margin-left : 10px; margin-top : 4px;  font-size : 15px;">◆ </p>
								&nbsp;&nbsp;
						 		<p style = "font-size : 19px; color : #DBDBDB;">Area_Gain_Ratio_Outside_Reverse</p>
					    	</div>
						  
						  	<div id = "areaChangeRightChart" class="myChartDiv"></div>
						</div>
					    
					</div>
					
					<div class = "chart" id = "pattern" style = "display : block; width : 50%; height : 80%;">
						
						<div style="height : 50%; padding : 4%;">
							<div style="display:flex;">
								<p style = "color : rgb(171 , 201 , 39); margin-left : 10px; margin-top : 4px; font-size : 15px;">◆ </p>
								&nbsp;&nbsp;
						  		<p style = "font-size : 19px; color : #DBDBDB;">Vulnerability_Area_Loss_Ratio</p>
							</div>
						 	<div id = "patternleftChart" class="myChartDiv"></div>
						</div>
			 	 
						
					    
					    <div style="height : 50%; padding : 4%; margin-top : 3%;">
					    	<div style="display:flex;">
					    		<p style = "color : rgb(171 , 201 , 39); margin-left : 10px; margin-top : 4px; font-size : 15px;">◆ </p>
								&nbsp;&nbsp;
						 		<p style = " font-size : 19px; color : #DBDBDB;">Vulnerability_Area_LossIN_GainOUT_Ratio</p>
					    	</div>
						 	<div id = "patternRightChart" class="myChartDiv"></div>
						</div>
					    
				    </div>
					
					<div class = "chart" id = "speicesIndexDiv" style = "display : block; width : 50%; height : 80%;">
						
						<div style="height : 50%; padding : 4%;">
							<div style="display:flex;">
								<p style = "color : rgb(171 , 201 , 39); margin-left : 10px; margin-top : 4px;  font-size : 15px;">◆ </p>
								&nbsp;&nbsp;
						  		<p style = "font-size : 19px; color : #DBDBDB;">Vulnerability_Area_Loss_Ratio</p>
							</div>
							<div id="speicesIndexDiv1"> </div>
						</div>
					    
					    <div id = "indexDiv2" style = "height : 50%; padding : 4%; margin-top : 3%;">
					    	<div style="display:flex;">
					    		<p style = "color : rgb(171 , 201 , 39); margin-left : 10px; margin-top : 4px;  font-size : 15px;">◆ </p>
								&nbsp;&nbsp;
						  		<p style = "font-size : 19px; color : #DBDBDB;">Vulnerability_Area_LossIN_GainOUT_Ratio</p>
					    	</div>
						 	<div id="speicesIndexDiv2"> </div>
						</div>
					    
					</div>
				
					<input type="hidden" id="chartDrawIndex" value="0"/>
				   	<script>
				    	Chart.defaults.global.elements.line.fill = false;
				    	
				    	/* label 색깔 */
						var colors = ["rgba(239,150,45,0.8)" , "rgba(186, 201, 100, 0.8)" , "rgba(67, 138, 94, 0.8)" ,  "rgba(67,111,138,0.8)"  ,"rgba(221,107,77,0.8)" ];
				    	
						/* 차트 구분자 (방향)  */
				   		var left = "left";
				   		var right = "right";
				    	
				    	/*  취약성 면적변화비 변수  */
				    	var areaChartInfo;
						var areaLeftChartId = "areaChartLeft";
						var areaRightChartId = "areaChartRight";
						var areaLeftDivId = "#areaChangeLeftChart";
						var areaRightDivId = "#areaChangeRightChart";
						/* 취약성 면적변화비 차트 데이터 URL  */
				   		var areaUrl = "areaChangeChartData.eco";
				   		/* 취약성 면적변화비 차트 변수 선언 */
				   		var areaChangeLeftChart;
				   		var areaChangeRightChart;
				   		/*  취약성 면적변화비 변수  */
				   		
				   		/* 취약성 패턴 차트   */
				   		var patternChartInfo;
				   		var patternLeftChartId = "patternChartLeft";
				   		var patternRightChartId = "patternChartRight";
				   		var patternLeftDivId = "#patternleftChart";
				   		var patternRightDivId = "#patternRightChart";
				   		
				   		var patternLeftChart;
				   		var patternRightChart;
				   			
				   		/* 취약성 패턴 차트 차트 데이터 URL  */
				   		var patternUrl = "vulneRabilityPatternData.eco";
				   		
				   		/* 취약성  순위 차트 차트 데이터 URL  */
				   		var speicesIndexUrl = "";
				   		
				   		/* 바뀌기 전 데이터 */
				   		var oldChartData;
				
				   		var chartArr; 
				   		
				   	 	function getScatterFrame(chartId , chartDivId) {
				   			var canvas = document.createElement("canvas");
							
							canvas.width = "800"; 
							canvas.height = "300";
							canvas.id = chartId;
				   			
							$(chartDivId).append(canvas);
							
				   			var ctx = document.getElementById(chartId).getContext('2d');
				   			return  new Chart(ctx, {
					     	    type: 'scatter',
					     	    data: {
					     	        datasets: [],
					     	    },
					     	    
					     	    options: {
					     	    		// events: ['click'],
					     	    	responsive: false ,
					     	        legend: {
					     	        position: 'right'
					     	      			},
					     	         title: {
					     	            display: true,
					     	            text: '취약성지수 결과 - 취약성 면적변화비'
					     	        				},
					     	        
					     	            scales: {
					     	            xAxes: [{
					     	                type: 'linear',
					     	                position: 'bottom'
					     	            }]
					     	        },
					
					     	            		},
					     	    }
					     	);
				   		}
				   		
				   		function getLineFrame(chartId , chartDivId) {
							var canvas = document.createElement("canvas");
							
							canvas.width = "800"; 
							canvas.height = "300";
							canvas.id = chartId;
				   			
							$(chartDivId).append(canvas);
							var ctx = document.getElementById(chartId).getContext('2d');
				   			return new Chart(ctx, {
						        type: 'line',
						        data: {
						            datasets: [],
						        },
						        
						        options: {
						        		// events: ['click'],
						        	responsive: false ,
						            legend: {
						            position: 'right'
						          			},
						             title: {
						                display: true,
						                text: '취약성지수 결과 - 취약성 패턴'
						            				},
						            
						                scales: {
						                xAxes: [{
						                    type: 'linear',
						                    position: 'bottom'
						                }]
						            },
						
						                		},
						        }
						    );
				   		}
				   		
				   		function getChartInfo(leftChart , rightChart) {
				   			 var chartInfo = {
									'leftChart' : {
										'chartFrame' : leftChart ,
										'direction' : left
									},
									'rightChart' : {
										'chartFrame' : rightChart ,
										'direction' : right
									}
							}
				   			 
				   			return chartInfo;
				   		}
				   		
				   		function ajaxChartData(realUrl , model , speices , scenario  , analysis , chartInfo) {
				   			var ajaxChartData;
							$.ajax({
								url : realUrl , 
								data : JSON.stringify({'model' : model  , 'speices' : speices , 'scenario' : scenario  , 'analysis' : analysis}),
								type : 'POST' ,
								dataType : "json" ,
								contentType: "application/json",
								success : function(data) {
									
									var leftChartData = data.leftChart;
									var rightChartData = data.rightChart;
									
									ajaxChartData = {'leftChartData' : leftChartData , 'rightChartData' : rightChartData};
									
									updateChart(chartInfo.leftChart , ajaxChartData);
									updateChart(chartInfo.rightChart , ajaxChartData);
								},
								error : function(err) {
									alert(err); 
								}
							});
						}
				   		
				   		function updateChart(chartInfo , chartData ) {
				   			var inputChartData = chartInfo.direction == "left" ? chartData.leftChartData : chartData.rightChartData;
				   			
				   			var myChart = chartInfo.chartFrame;
				   			
							var speicesLabel = inputChartData.speices;
							var chartDataArr = new Array();
		
							myChart.data.labels.push(speicesLabel);
							
							var labelsLength = myChart.data.labels.length;
							
							for(var a = 0; a < inputChartData.x.length; a++) {
								chartDataArr.push({x : inputChartData.x[a] , y : inputChartData.y[a]});
							}
							
							var optionColor = colors[labelsLength -1];
							var chartData = 
									 {label : speicesLabel ,
									  data : chartDataArr , 
									  backgroundColor: optionColor,
							          borderColor: optionColor,
							          pointBorderColor: optionColor,
						              pointBackgroundColor: "#fff",
						              pointBorderWidth: 10,
						              pointHoverRadius: 10,
						              pointHoverBackgroundColor: optionColor,
						          	  pointHoverBorderColor: optionColor,
						        	  pointHoverBorderWidth: 2,
						         	  pointRadius: 1,
						       	      pointHitRadius: 5,
						           	  lineTension: 0};
							
						    myChart.data.datasets.push(chartData); 
							
							myChart.update();
				   		}
				   		
				   		
				   		function removeData(chart , removeIndex) {
							chart.data.datasets.splice(removeIndex , 1);
							chart.data.labels.splice(removeIndex , 1);
							chart.update();
						}
				   		
						(function(){
							$("#speicesIndexDiv").css("display" , "none");
							$("#pattern").css("display" , "none");
							
							$('.ui.dropdown')
							  .dropdown({
							    allowAdditions: true ,
							    placeholder : '5개까지만 선택해주세요.' ,
							    maxSelections: 5
							  });
							
							$(".vulneRability:eq(0)").attr("class" , "vulneRability vulneRabilityOn");
							
							$("#speices").change(function() {
								var speicesVal = $(this).val();
								var oldSpeicesVal = oldChartData;
								
								oldChartData = speicesVal;
								
								var climateModelVal = $("#climateModel").val();
								var climateScenario = $("#climateScenario").val();
								var analysis = $("#analysis").val();
								
								var chartDrawIndex = $("#chartDrawIndex").val();
								
								if(chartDrawIndex == 0) {
									$("#chartDrawIndex").val(1);
									var firstChartVal = String($(this).val());
									
									areaChangeLeftChart  = getScatterFrame(areaLeftChartId , areaLeftDivId);
									areaChangeRightChart = getScatterFrame(areaRightChartId , areaRightDivId);
									patternLeftChart = getLineFrame(patternLeftChartId , patternLeftDivId);
									patternRightChart = getLineFrame(patternRightChartId , patternRightDivId);
									
									chartArr = [areaChangeLeftChart , areaChangeRightChart , patternLeftChart , patternRightChart];
									
									patternChartInfo = getChartInfo(patternLeftChart , patternRightChart); 
									areaChartInfo = getChartInfo(areaChangeLeftChart ,areaChangeRightChart);
								
									ajaxChartData(patternUrl ,climateModelVal , firstChartVal , climateScenario  , analysis , patternChartInfo); 
									ajaxChartData(areaUrl , climateModelVal , firstChartVal , climateScenario  , analysis , areaChartInfo);
								} else {
									if(oldSpeicesVal.length < speicesVal.length) {
										speicesVal.forEach(function(addData) {
											if(!oldSpeicesVal.includes(addData)) {
												
												ajaxChartData(patternUrl ,climateModelVal , addData , climateScenario  , analysis , patternChartInfo);
												ajaxChartData(areaUrl , climateModelVal , addData , climateScenario  , analysis , areaChartInfo);
											}
										});
									} else {
										oldSpeicesVal.forEach(function(item) {
											if(!speicesVal.includes(item)) {
												
												var removeIndex = areaChangeLeftChart.data.labels.indexOf(item);
												
												chartArr.forEach(function(chart) {
													removeData(chart , removeIndex); 
												});
												
											}
										});
										
									}
								}
							});
						
							$(".vulneRability").click(function() {
								var index = $(".vulneRability").index(this);
								
								if(index == 0) {
									$("#areaChange").show();
									$("#pageIndex").val(index);
									$("#pattern").css("display" , "none");
									$("#speicesIndexDiv").css("display" , "none");
									$(".vulneRability").attr("class" , "vulneRability");
									$(this).attr("class" , "vulneRability vulneRabilityOn");
								} else if(index == 1) {
									$("#pattern").show();
									$("#pageIndex").val(index);
									$("#areaChange").css("display" , "none");
									$("#speicesIndexDiv").css("display" , "none");
									$(".vulneRability").attr("class" , "vulneRability");
									$(this).attr("class" , "vulneRability vulneRabilityOn");
								} else if(index == 2) {
									$("#speicesIndexDiv").show();
									$("#pageIndex").val(index);
									$(".vulneRability").attr("class" , "vulneRability");
									$("#areaChange").css("display" , "none");
									$("#pattern").css("display" , "none");
									$(this).attr("class" , "vulneRability vulneRabilityOn");
								}
							});
						})();
						
						</script>
				</div>
			</div>
		</div>
	</div>
	<!-- /*
					$("#speicesIndexDiv1").empty();
					$("#speicesIndexDiv2").empty();
					var colors = ["rgba(000,204,000,0.5)" , "rgba(255,102,102,0.5)"];
					
					Chart.defaults.global.elements.line.fill = false;
					var canvas3 = document.createElement("canvas");
					var canvas4 = document.createElement("canvas");
					
					canvas3.width = "800";
					canvas4.width = "800";
					canvas3.height = "300";
					canvas4.height = "300";
					
					canvas3.id = "speicesIndex";
					canvas4.id = "speicesIndex1";
				
				
					$("#speicesIndexDiv1").append(canvas3);
					$("#speicesIndexDiv2").append(canvas4);
					$("#indexDiv2").css("margin-top" , "2%");
					var ctx = document.getElementById("speicesIndex").getContext('2d');
					if(analysis == "speices") {
						var barChart = new Chart(ctx, {
							 type: 'horizontalBar',
							  data: {
							    labels: ["털물참새피", "돼지풀", "도깨비가지", "물참새피", "미국쑥부쟁이"],
							    datasets: [
							      {
							        label: "Above Average",
							        data: [4,7,9,2,5],
							        backgroundColor: "rgba(000,204,000,0.5)",
							        borderColor: "rgb(000,204,000,0.5)",
							        borderWidth: 1
							      },
							     {
							      label: "Below Average",
							  data: [-1,-5 ,-9,-6,-8],
							  backgroundColor: "rgba(255,102,102,0.5)",
							  borderColor: "rgb(255,102,102,0.5)",
							  borderWidth: 1
							      }
							    ]
							  },
							  options: {
								responsive: false ,
							    maintainAspectRatio: false,
							    legend: {
							    		// title: {text : "Vulnerability"},
							        position: 'right'
							      			},
							         title: {
							            display: true,
							            text: '취약성지수 결과 - 취약성 순위'
							        				},
							     scales: {
							    xAxes: [{
							      gridLines: {
							        display: true,
							        color: "rgb(153,153,153,0.5)"
							      },
							      scaleLabel: {
							        display: true,
							        labelString: "Vulnerability_Area_Loss_Ratio",
							        fontColor: "black"
							                 }
							             }],yAxes: [{
							      gridLines: {
							        color: "rgb(153,153,153,0.5)",
							        borderDash: [2, 5],
							      },
							      scaleLabel: {
							        display: true,
							        labelString: "Group",
							        fontColor: "black"
							      }
							    }]
							      
							  },
							  }
						});
						
						var ctx = document.getElementById("speicesIndex1").getContext('2d');
						
						var barChart = new Chart(ctx, {
							 type: 'horizontalBar',
							  data: {
							    labels: ["털물참새피", "돼지풀", "도깨비가지", "물참새피", "미국쑥부쟁이"],
							    datasets: [
							      {
							        label: "Above Average",
							        data: [5,1,4,10 ,7],
							        backgroundColor: "rgba(000,204,000,0.5)",
							        borderColor: "rgb(000,204,000,0.5)",
							        borderWidth: 1
							      },
							     {
							      label: "Below Average",
							  data: [-8,-4,-3,-1,-9],
							  backgroundColor: "rgba(255,102,102,0.5)",
							  borderColor: "rgb(255,102,102,0.5)",
							  borderWidth: 1
							      }
							    ]
							  },
							  options: {
								responsive: false ,
							    maintainAspectRatio: false,
							    legend: {
							    		// title: {text : "Vulnerability"},
							        position: 'right'
							      			},
							         title: {
							            display: true,
							            text: '취약성지수 결과 - 취약성 순위'
							        				},
							     scales: {
							    xAxes: [{
							      gridLines: {
							        display: true,
							        color: "rgb(153,153,153,0.5)"
							      },
							      scaleLabel: {
							        display: true,
							        labelString: "Vulnerability_Area_LossIN_GainOUT_Ratio",
							        fontColor: "black"
							                 }
							             }],yAxes: [{
							      gridLines: {
							        color: "rgb(153,153,153,0.5)",
							        borderDash: [2, 5],
							      },
							      scaleLabel: {
							        display: true,
							        labelString: "Group",
							        fontColor: "black"
							      }
							    }]
							      
							  },
							  }
						});
					} else {
						var ctx = document.getElementById("speicesIndex").getContext('2d');
						
						var barChart = new Chart(ctx, {
							 type: 'horizontalBar',
							  data: {
							    labels: ["2080", "2070", "2060", "2050", "2040", "2030", "2020", "2010", "2000"],
							    datasets: [
							      {
							        label: "Above Average",
							        data: [2,6,5,8,1,8,7,6,10],
							        backgroundColor: "rgba(000,204,000,0.5)",
							        borderColor: "rgb(000,204,000,0.5)",
							        borderWidth: 1
							      },
							     {
							      label: "Below Average",
							  data: [-1,-5,-6,-7,0,-2,-5,-6,-8],
							  backgroundColor: "rgba(255,102,102,0.5)",
							  borderColor: "rgb(255,102,102,0.5)",
							  borderWidth: 1
							      }
							    ]
							  },
							  options: {
								responsive: false ,
							    maintainAspectRatio: false,
							    legend: {
							    		// title: {text : "Vulnerability"},
							        position: 'right'
							      			},
							         title: {
							            display: true,
							            text: '취약성지수 결과 - 취약성 순위'
							        				},
							     scales: {
							    xAxes: [{
							      gridLines: {
							        display: true,
							        color: "rgb(153,153,153,0.5)"
							      },
							      scaleLabel: {
							        display: true,
							        labelString: "Vulnerability_Area_Loss_Ratio",
							        fontColor: "black"
							                 }
							             }],yAxes: [{
							      gridLines: {
							        color: "rgb(153,153,153,0.5)",
							        borderDash: [2, 5],
							      },
							      scaleLabel: {
							        display: true,
							        labelString: "Group",
							        fontColor: "black"
							      }
							    }]
							      
							  },
							  }
						});
						
						var ctx = document.getElementById("speicesIndex1").getContext('2d');
						
						var barChart = new Chart(ctx, {
							 type: 'horizontalBar',
							  data: {
							    labels: ["2080", "2070", "2060", "2050", "2040", "2030", "2020", "2010", "2000"],
							    datasets: [
							      {
							        label: "Above Average",
							        data: [5,1,4,10,2,6,3,4,8],
							        backgroundColor: "rgba(000,204,000,0.5)",
							        borderColor: "rgb(000,204,000,0.5)",
							        borderWidth: 1
							      },
							     {
							      label: "Below Average",
							  data: [-8,-4,-3,-1,-9,-7,-3,-4,-10],
							  backgroundColor: "rgba(255,102,102,0.5)",
							  borderColor: "rgb(255,102,102,0.5)",
							  borderWidth: 1
							      }
							    ]
							  },
							  options: {
								responsive: false ,
							    maintainAspectRatio: false,
							    legend: {
							    		// title: {text : "Vulnerability"},
							        position: 'right'
							      			},
							         title: {
							            display: true,
							            text: '취약성지수 결과 - 취약성 순위'
							        				},
							     scales: {
							    xAxes: [{
							      gridLines: {
							        display: true,
							        color: "rgb(153,153,153,0.5)"
							      },
							      scaleLabel: {
							        display: true,
							        labelString: "Vulnerability_Area_LossIN_GainOUT_Ratio",
							        fontColor: "black"
							                 }
							             }],yAxes: [{
							      gridLines: {
							        color: "rgb(153,153,153,0.5)",
							        borderDash: [2, 5],
							      },
							      scaleLabel: {
							        display: true,
							        labelString: "Group",
							        fontColor: "black"
							      }
							    }]
							      
							  },
							  }
						});
						
						
					}
					
					
				}	
			
		 */ -->
</body>
</html>